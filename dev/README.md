# FocusPro

Система мониторинга и диагностики для терминалов и банкоматов.

## Статус

Рабочий макет.

## Основное

- Работает на "Raspberry Pi 3В+" с ОС "Raspbian".
- Интерфейс управления устройствами GPIO основан на библиотеке gpiozero.
- Работу с датчиками на шине 1-Wire обеспечивают дистрибутивы owfs и python-ow.
- Бэкэнд базируется на стеке nginx/gunicorn/flask.

## Структура проекта

```
/docs -- файлы документации
+--conf.py -- конфигурация Sphinx
+--index.rst -- мастер-файл документации
+--make.bat -- скрипт для сборки документации
+--Makefile -- файл описания для процесса сборки
/focus -- корневой пакет приложения
+--/back -- бэкэнд
|  +--/commands -- управление устройством
|  |  +--__init__.py -- файл указателя вложенных модулей
|  |  +--handle.py -- модуль обработки команд
|  |  +--parse.py -- модуль парсинга поступающих сообщений с командами
|  +--/feedback -- отправка сообщений и логирование
|  |  +--__init__.py -- файл указателя вложенных модулей
|  |  +--logger.py -- модуль внутреннего логирования
|  |  +--reporter.py -- модуль отправки сообщений посреднику
|  +--/hardware -- конфигурирование физических компонентов устройства
|  |  +--__init__.py -- головной модуль инициализации компонентов
|  |  +--autonomous.py -- модуль автономных компонентов
|  |  +--base.py -- модуль абстрактных базовых логических компонентов
|  |  +--switchables.py -- модуль переключаемых компонентов
|  +--/utils -- вспомогательные утилиты для скриптов
|  |  +--__init__.py -- набор различных констант
|  |  +--db_tools.py -- инструменты для взаимодействия с локальной БД
|  |  +--messaging.py -- инструменты для создания и обработки сообщений
|  |  +--one_wire.py -- инструменты для работы с компонентами 1-Wire
|  +--__init__.py -- модуль инициализации бэкэнда приложения
+--/front -- фронтэнд
|  +--/static -- статические файлы
|  |  +--/css -- стили для страниц
|  +--/templates -- HTML-шаблоны
|  |  +--base.html -- базовый слой разметки для каждой страницы
|  |  +--index.html -- главная страница
|  |  +--log.html -- страница журнала событий
|  |  +--management.html -- страница управления компонентами устройства
|  +--__init__.py -- точка входа в приложение
|  +--models.py -- модели и функции для работы с БД
|  +--views.py -- представления моделей по определённым маршрутам
+--__init.py__ -- пустой модуль для распознавания пакета
+--config.yml -- конфигурация оборудования
+--focus.conf -- настройка маршрутизации приложения на сервере
+--focus.log -- журнал событий
/sysenvs -- переменные окружения для использования во время разработки
+--db -- переменные для доступа к внешней базе данных
/systemd -- настройка служб автозапуска приложения
+--focus.service -- автозапуск gunicorn, установка сопутствующих параметров и привязка к Unix-сокету
+--focus.socket -- Unix-сокет для связывания gunicorn с прокси-сервером
__init__.py -- модуль верхнего уровня для распознавания пакета
.gitignore -- список игнорируемых файлов для системы контроля версий
README.md -- описание проекта
requirements.txt -- необходимые python-пакеты для исправного функционирования приложения
setup.py -- файл установки пакета focus для разрешения конфликтов поиска имён
```
